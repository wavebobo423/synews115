<extend name="Base/base" />
<block name="body">
    <div><h2 style="color:#00b38a;text-align:center;">网站后台管理</h2></div>
    <div id="main" style="height:400px"></div>
</block>
<block name="script">
<script type="text/javascript" src="__JS__/echarts-all.js"></script>
<script>
    var myChart = echarts.init(document.getElementById('main'));
        option = {
            tooltip : {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            legend: {
                orient : 'vertical',
                x : 'left',
                data:["<?php echo $data[0]['gname']?>","<?php echo $data[1]['gname']?>","<?php echo $data[2]['gname']?>","<?php echo $data[3]['gname']?>","<?php echo $data[4]['gname']?>"]
            },
            toolbox: {
                show : true,
                feature : {
                    mark : {show: true},
                    dataView : {show: true, readOnly: false},
                    magicType : {
                        show: true, 
                        type: ['pie', 'funnel']
                    },
                    restore : {show: true},
                    saveAsImage : {show: true}
                }
            },
            calculable : false,
            series : [
                {
                    name:'访问来源',
                    type:'pie',
                    selectedMode: 'single',
                    radius : [0, 70],
                    
                    // for funnel
                    x: '20%',
                    width: '40%',
                    funnelAlign: 'right',
                    max: 1548,
                    
                    itemStyle : {
                        normal : {
                            label : {
                                position : 'inner'
                            },
                            labelLine : {
                                show : false
                            }
                        }
                    },
                    data:[
                        {value:<?php echo count($duan['wap']);?>, name:'手机端'},
                        {value:<?php echo count($duan['pc']);?>, name:'电脑端'},
                        // {value:679, name:'角色'},
                        // {value:1548, name:'即时', selected:true}
                    ]
                },
                {
                    name:'下载次数',
                    type:'pie',
                    radius : [100, 140],
                    
                    // for funnel
                    x: '60%',
                    width: '35%',
                    funnelAlign: 'left',
                    max: 1048,
                    
                    data:[
                        {value:<?php echo $data[0]['gcount']?>, name:"<?php echo $data[0]['gname']?>"},
                        {value:<?php echo $data[1]['gcount']?>, name:"<?php echo $data[1]['gname']?>"},
                        {value:<?php echo $data[2]['gcount']?>, name:"<?php echo $data[2]['gname']?>"},
                        {value:<?php echo $data[3]['gcount']?>, name:"<?php echo $data[3]['gname']?>"},
                        {value:<?php echo $data[4]['gcount']?>, name:"<?php echo $data[4]['gname']?>"},
//                        {value:251, name:'网站运营'},
//                        {value:147, name:'文案'},
//                        {value:102, name:'其他'}
                    ]
                }
            ]
        };
        myChart.setOption(option);    
</script>
</block>